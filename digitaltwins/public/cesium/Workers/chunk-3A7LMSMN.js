import{a as t}from"./chunk-ICZXFP3D.js";import{a as e}from"./chunk-ZFTFDHK4.js";import{a as o}from"./chunk-74GQJJ7R.js";import{a as n}from"./chunk-NNHN6WUY.js";import{a as r}from"./chunk-T7ERZ2CJ.js";import{b as a,c as i,d as s}from"./chunk-GSNDLQ4C.js";import{d as u}from"./chunk-BKSIEBAA.js";import{a as m}from"./chunk-VTVHUB7E.js";import{a as f,c as p}from"./chunk-JMSSU44E.js";import{a as l}from"./chunk-4UYSGV57.js";import{a as c}from"./chunk-VLPNAR64.js";import{a as h}from"./chunk-GE5NEIZC.js";import{e as d}from"./chunk-35CVRQTC.js";var b,w=new p,A=new f,g=new f,y=new f,_=new f;function v(t){let n=(t=c(t,c.EMPTY_OBJECT)).length,r=t.topRadius,a=t.bottomRadius,i=c(t.vertexFormat,o.DEFAULT),s=c(t.slices,128);if(!d(n))throw new h("options.length must be defined.");if(!d(r))throw new h("options.topRadius must be defined.");if(!d(a))throw new h("options.bottomRadius must be defined.");if(s<3)throw new h("options.slices must be greater than or equal to 3.");if(d(t.offsetAttribute)&&t.offsetAttribute===e.TOP)throw new h("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=n,this._topRadius=r,this._bottomRadius=a,this._vertexFormat=o.clone(i),this._slices=s,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}v.packedLength=o.packedLength+5,v.pack=function(t,e,n){if(!d(t))throw new h("value is required");if(!d(e))throw new h("array is required");return n=c(n,0),o.pack(t._vertexFormat,e,n),n+=o.packedLength,e[n++]=t._length,e[n++]=t._topRadius,e[n++]=t._bottomRadius,e[n++]=t._slices,e[n]=c(t._offsetAttribute,-1),e};var R=new o,k={vertexFormat:R,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};v.unpack=function(t,e,n){if(!d(t))throw new h("array is required");e=c(e,0);let r=o.unpack(t,e,R);e+=o.packedLength;let a=t[e++],i=t[e++],s=t[e++],u=t[e++],m=t[e];return d(n)?(n._vertexFormat=o.clone(r,n._vertexFormat),n._length=a,n._topRadius=i,n._bottomRadius=s,n._slices=u,n._offsetAttribute=-1===m?void 0:m,n):(k.length=a,k.topRadius=i,k.bottomRadius=s,k.slices=u,k.offsetAttribute=-1===m?void 0:m,new v(k))},v.createGeometry=function(o){let c=o._length,h=o._topRadius,b=o._bottomRadius,v=o._vertexFormat,R=o._slices;if(c<=0||h<0||b<0||0===h&&0===b)return;let k=R+R,x=R+k,F=k+k,T=t.computePositions(c,h,b,R,!0),O=v.st?new Float32Array(2*F):void 0,E=v.normal?new Float32Array(3*F):void 0,N=v.tangent?new Float32Array(3*F):void 0,L=v.bitangent?new Float32Array(3*F):void 0,P,j=v.normal||v.tangent||v.bitangent;if(j){let t=v.tangent||v.bitangent,e=0,o=0,n=0,r=Math.atan2(b-h,c);A.z=Math.sin(r);let a=Math.cos(r),i=y,s=g;for(P=0;P<R;P++){let r=P/R*l.TWO_PI,u=a*Math.cos(r),m=a*Math.sin(r);j&&(A.x=u,A.y=m,t&&(i=f.normalize(f.cross(f.UNIT_Z,A,i),i)),v.normal&&(E[e++]=A.x,E[e++]=A.y,E[e++]=A.z,E[e++]=A.x,E[e++]=A.y,E[e++]=A.z),v.tangent&&(N[o++]=i.x,N[o++]=i.y,N[o++]=i.z,N[o++]=i.x,N[o++]=i.y,N[o++]=i.z),v.bitangent&&(s=f.normalize(f.cross(A,i,s),s),L[n++]=s.x,L[n++]=s.y,L[n++]=s.z,L[n++]=s.x,L[n++]=s.y,L[n++]=s.z))}for(P=0;P<R;P++)v.normal&&(E[e++]=0,E[e++]=0,E[e++]=-1),v.tangent&&(N[o++]=1,N[o++]=0,N[o++]=0),v.bitangent&&(L[n++]=0,L[n++]=-1,L[n++]=0);for(P=0;P<R;P++)v.normal&&(E[e++]=0,E[e++]=0,E[e++]=1),v.tangent&&(N[o++]=1,N[o++]=0,N[o++]=0),v.bitangent&&(L[n++]=0,L[n++]=1,L[n++]=0)}let D=n.createTypedArray(F,12*R-12),G=0,U=0;for(P=0;P<R-1;P++)D[G++]=U,D[G++]=U+2,D[G++]=U+3,D[G++]=U,D[G++]=U+3,D[G++]=U+1,U+=2;for(D[G++]=k-2,D[G++]=0,D[G++]=1,D[G++]=k-2,D[G++]=1,D[G++]=k-1,P=1;P<R-1;P++)D[G++]=k+P+1,D[G++]=k+P,D[G++]=k;for(P=1;P<R-1;P++)D[G++]=x,D[G++]=x+P,D[G++]=x+P+1;let z=0;if(v.st){let t=Math.max(h,b);for(P=0;P<F;P++){let e=f.fromArray(T,3*P,_);O[z++]=(e.x+t)/(2*t),O[z++]=(e.y+t)/(2*t)}}let C=new r;v.position&&(C.position=new s({componentDatatype:m.DOUBLE,componentsPerAttribute:3,values:T})),v.normal&&(C.normal=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:E})),v.tangent&&(C.tangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:N})),v.bitangent&&(C.bitangent=new s({componentDatatype:m.FLOAT,componentsPerAttribute:3,values:L})),v.st&&(C.st=new s({componentDatatype:m.FLOAT,componentsPerAttribute:2,values:O})),w.x=.5*c,w.y=Math.max(b,h);let I=new u(f.ZERO,p.magnitude(w));if(d(o._offsetAttribute)){c=T.length;let t=+(o._offsetAttribute!==e.NONE),n=new Uint8Array(c/3).fill(t);C.applyOffset=new s({componentDatatype:m.UNSIGNED_BYTE,componentsPerAttribute:1,values:n})}return new i({attributes:C,indices:D,primitiveType:a.TRIANGLES,boundingSphere:I,offsetAttribute:o._offsetAttribute})},v.getUnitCylinder=function(){return d(b)||(b=v.createGeometry(new v({topRadius:1,bottomRadius:1,length:1,vertexFormat:o.POSITION_ONLY}))),b};var x=v;export{x as a};