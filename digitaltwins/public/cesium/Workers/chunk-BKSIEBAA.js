import{b as e,h as t}from"./chunk-YWRPWWKI.js";import{a as n,b as r,d as o,e as a}from"./chunk-JMSSU44E.js";import{a as c}from"./chunk-4UYSGV57.js";import{a as i}from"./chunk-VLPNAR64.js";import{a as u,b as l}from"./chunk-GE5NEIZC.js";import{e as s}from"./chunk-35CVRQTC.js";function d(e){this._ellipsoid=i(e,o.default),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(d.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),d.prototype.project=function(e,t){let r=this._semimajorAxis,o=e.longitude*r,a=e.latitude*r,c=e.height;return s(t)?(t.x=o,t.y=a,t.z=c,t):new n(o,a,c)},d.prototype.unproject=function(e,t){if(!s(e))throw new u("cartesian is required");let n=this._oneOverSemimajorAxis,o=e.x*n,a=e.y*n,c=e.z;return s(t)?(t.longitude=o,t.latitude=a,t.height=c,t):new r(o,a,c)};var f=d,y=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),p=function(e,t){this.start=i(e,0),this.stop=i(t,0)};function m(e,t){this.center=n.clone(i(e,n.ZERO)),this.radius=i(t,0)}var h=new n,x=new n,g=new n,z=new n,w=new n,b=new n,O=new n,j=new n,S=new n,q=new n,E=new n,R=new n,v=4/3*c.PI;m.fromPoints=function(e,t){if(s(t)||(t=new m),!s(e)||0===e.length)return t.center=n.clone(n.ZERO,t.center),t.radius=0,t;let r=n.clone(e[0],O),o=n.clone(r,h),a=n.clone(r,x),c=n.clone(r,g),i=n.clone(r,z),u=n.clone(r,w),l=n.clone(r,b),d=e.length,f;for(f=1;f<d;f++){n.clone(e[f],r);let t=r.x,s=r.y,d=r.z;t<o.x&&n.clone(r,o),t>i.x&&n.clone(r,i),s<a.y&&n.clone(r,a),s>u.y&&n.clone(r,u),d<c.z&&n.clone(r,c),d>l.z&&n.clone(r,l)}let y=n.magnitudeSquared(n.subtract(i,o,j)),p=n.magnitudeSquared(n.subtract(u,a,j)),v=n.magnitudeSquared(n.subtract(l,c,j)),P=o,T=i,I=y;p>I&&(I=p,P=a,T=u),v>I&&(I=v,P=c,T=l),S.x=(P.x+T.x)*.5,S.y=(P.y+T.y)*.5,S.z=(P.z+T.z)*.5;let B=n.magnitudeSquared(n.subtract(T,S,j)),C=Math.sqrt(B);q.x=o.x,q.y=a.y,q.z=c.z,E.x=i.x,E.y=u.y,E.z=l.z;let D=n.midpoint(q,E,R),Z=0;for(f=0;f<d;f++){n.clone(e[f],r);let t=n.magnitude(n.subtract(r,D,j));t>Z&&(Z=t);let o=n.magnitudeSquared(n.subtract(r,S,j));if(o>B){let e=Math.sqrt(o);B=(C=(C+e)*.5)*C;let t=e-C;S.x=(C*S.x+t*r.x)/e,S.y=(C*S.y+t*r.y)/e,S.z=(C*S.z+t*r.z)/e}}return C<Z?(n.clone(S,t.center),t.radius=C):(n.clone(D,t.center),t.radius=Z),t};var P=new f,T=new n,I=new n,B=new r,C=new r;m.fromRectangle2D=function(e,t,n){return m.fromRectangleWithHeights2D(e,t,0,0,n)},m.fromRectangleWithHeights2D=function(e,r,a,c,u){if(s(u)||(u=new m),!s(e))return u.center=n.clone(n.ZERO,u.center),u.radius=0,u;P._ellipsoid=o.default,r=i(r,P),t.southwest(e,B),B.height=a,t.northeast(e,C),C.height=c;let l=r.project(B,T),d=r.project(C,I),f=d.x-l.x,y=d.y-l.y,p=d.z-l.z;u.radius=.5*Math.sqrt(f*f+y*y+p*p);let h=u.center;return h.x=l.x+.5*f,h.y=l.y+.5*y,h.z=l.z+.5*p,u};var D=[];m.fromRectangle3D=function(e,r,a,c){if(r=i(r,o.default),a=i(a,0),s(c)||(c=new m),!s(e))return c.center=n.clone(n.ZERO,c.center),c.radius=0,c;let u=t.subsample(e,r,a,D);return m.fromPoints(u,c)},m.fromVertices=function(e,t,r,o){if(s(o)||(o=new m),!s(e)||0===e.length)return o.center=n.clone(n.ZERO,o.center),o.radius=0,o;t=i(t,n.ZERO),r=i(r,3),l.typeOf.number.greaterThanOrEquals("stride",r,3),O.x=e[0]+t.x,O.y=e[1]+t.y,O.z=e[2]+t.z;let a=n.clone(O,h),c=n.clone(O,x),u=n.clone(O,g),d=n.clone(O,z),f=n.clone(O,w),y=n.clone(O,b),p=e.length,v;for(v=0;v<p;v+=r){let r=e[v]+t.x,o=e[v+1]+t.y,i=e[v+2]+t.z;O.x=r,O.y=o,O.z=i,r<a.x&&n.clone(O,a),r>d.x&&n.clone(O,d),o<c.y&&n.clone(O,c),o>f.y&&n.clone(O,f),i<u.z&&n.clone(O,u),i>y.z&&n.clone(O,y)}let P=n.magnitudeSquared(n.subtract(d,a,j)),T=n.magnitudeSquared(n.subtract(f,c,j)),I=n.magnitudeSquared(n.subtract(y,u,j)),B=a,C=d,D=P;T>D&&(D=T,B=c,C=f),I>D&&(D=I,B=u,C=y),S.x=(B.x+C.x)*.5,S.y=(B.y+C.y)*.5,S.z=(B.z+C.z)*.5;let Z=n.magnitudeSquared(n.subtract(C,S,j)),_=Math.sqrt(Z);q.x=a.x,q.y=c.y,q.z=u.z,E.x=d.x,E.y=f.y,E.z=y.z;let N=n.midpoint(q,E,R),k=0;for(v=0;v<p;v+=r){O.x=e[v]+t.x,O.y=e[v+1]+t.y,O.z=e[v+2]+t.z;let r=n.magnitude(n.subtract(O,N,j));r>k&&(k=r);let o=n.magnitudeSquared(n.subtract(O,S,j));if(o>Z){let e=Math.sqrt(o);Z=(_=(_+e)*.5)*_;let t=e-_;S.x=(_*S.x+t*O.x)/e,S.y=(_*S.y+t*O.y)/e,S.z=(_*S.z+t*O.z)/e}}return _<k?(n.clone(S,o.center),o.radius=_):(n.clone(N,o.center),o.radius=k),o},m.fromEncodedCartesianVertices=function(e,t,r){if(s(r)||(r=new m),!s(e)||!s(t)||e.length!==t.length||0===e.length)return r.center=n.clone(n.ZERO,r.center),r.radius=0,r;O.x=e[0]+t[0],O.y=e[1]+t[1],O.z=e[2]+t[2];let o=n.clone(O,h),a=n.clone(O,x),c=n.clone(O,g),i=n.clone(O,z),u=n.clone(O,w),l=n.clone(O,b),d=e.length,f;for(f=0;f<d;f+=3){let r=e[f]+t[f],s=e[f+1]+t[f+1],d=e[f+2]+t[f+2];O.x=r,O.y=s,O.z=d,r<o.x&&n.clone(O,o),r>i.x&&n.clone(O,i),s<a.y&&n.clone(O,a),s>u.y&&n.clone(O,u),d<c.z&&n.clone(O,c),d>l.z&&n.clone(O,l)}let y=n.magnitudeSquared(n.subtract(i,o,j)),p=n.magnitudeSquared(n.subtract(u,a,j)),v=n.magnitudeSquared(n.subtract(l,c,j)),P=o,T=i,I=y;p>I&&(I=p,P=a,T=u),v>I&&(I=v,P=c,T=l),S.x=(P.x+T.x)*.5,S.y=(P.y+T.y)*.5,S.z=(P.z+T.z)*.5;let B=n.magnitudeSquared(n.subtract(T,S,j)),C=Math.sqrt(B);q.x=o.x,q.y=a.y,q.z=c.z,E.x=i.x,E.y=u.y,E.z=l.z;let D=n.midpoint(q,E,R),Z=0;for(f=0;f<d;f+=3){O.x=e[f]+t[f],O.y=e[f+1]+t[f+1],O.z=e[f+2]+t[f+2];let r=n.magnitude(n.subtract(O,D,j));r>Z&&(Z=r);let o=n.magnitudeSquared(n.subtract(O,S,j));if(o>B){let e=Math.sqrt(o);B=(C=(C+e)*.5)*C;let t=e-C;S.x=(C*S.x+t*O.x)/e,S.y=(C*S.y+t*O.y)/e,S.z=(C*S.z+t*O.z)/e}}return C<Z?(n.clone(S,r.center),r.radius=C):(n.clone(D,r.center),r.radius=Z),r},m.fromCornerPoints=function(e,t,r){l.typeOf.object("corner",e),l.typeOf.object("oppositeCorner",t),s(r)||(r=new m);let o=n.midpoint(e,t,r.center);return r.radius=n.distance(o,t),r},m.fromEllipsoid=function(e,t){return l.typeOf.object("ellipsoid",e),s(t)||(t=new m),n.clone(n.ZERO,t.center),t.radius=e.maximumRadius,t};var Z=new n;m.fromBoundingSpheres=function(e,t){if(s(t)||(t=new m),!s(e)||0===e.length)return t.center=n.clone(n.ZERO,t.center),t.radius=0,t;let r=e.length;if(1===r)return m.clone(e[0],t);if(2===r)return m.union(e[0],e[1],t);let o=[],a;for(a=0;a<r;a++)o.push(e[a].center);let c=(t=m.fromPoints(o,t)).center,i=t.radius;for(a=0;a<r;a++){let t=e[a];i=Math.max(i,n.distance(c,t.center,Z)+t.radius)}return t.radius=i,t};var _=new n,N=new n,k=new n;m.fromOrientedBoundingBox=function(e,t){l.defined("orientedBoundingBox",e),s(t)||(t=new m);let r=e.halfAxes,o=a.getColumn(r,0,_),c=a.getColumn(r,1,N),i=a.getColumn(r,2,k);return n.add(o,c,o),n.add(o,i,o),t.center=n.clone(e.center,t.center),t.radius=n.magnitude(o),t};var M=new n,A=new n;m.fromTransformation=function(t,r){l.typeOf.object("transformation",t),s(r)||(r=new m);let o=e.getTranslation(t,M),a=e.getScale(t,A),c=.5*n.magnitude(a);return r.center=n.clone(o,r.center),r.radius=c,r},m.clone=function(e,t){if(s(e))return s(t)?(t.center=n.clone(e.center,t.center),t.radius=e.radius,t):new m(e.center,e.radius)},m.packedLength=4,m.pack=function(e,t,n){l.typeOf.object("value",e),l.defined("array",t),n=i(n,0);let r=e.center;return t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n]=e.radius,t},m.unpack=function(e,t,n){l.defined("array",e),t=i(t,0),s(n)||(n=new m);let r=n.center;return r.x=e[t++],r.y=e[t++],r.z=e[t++],n.radius=e[t],n};var U=new n,V=new n;m.union=function(e,t,r){l.typeOf.object("left",e),l.typeOf.object("right",t),s(r)||(r=new m);let o=e.center,a=e.radius,c=t.center,i=t.radius,u=n.subtract(c,o,U),d=n.magnitude(u);if(a>=d+i)return e.clone(r),r;if(i>=d+a)return t.clone(r),r;let f=(a+d+i)*.5,y=n.multiplyByScalar(u,(-a+f)/d,V);return n.add(y,o,y),n.clone(y,r.center),r.radius=f,r};var W=new n;m.expand=function(e,t,r){l.typeOf.object("sphere",e),l.typeOf.object("point",t),r=m.clone(e,r);let o=n.magnitude(n.subtract(t,r.center,W));return o>r.radius&&(r.radius=o),r},m.intersectPlane=function(e,t){l.typeOf.object("sphere",e),l.typeOf.object("plane",t);let r=e.center,o=e.radius,a=t.normal,c=n.dot(a,r)+t.distance;return c<-o?y.OUTSIDE:c<o?y.INTERSECTING:y.INSIDE},m.transform=function(t,n,r){return l.typeOf.object("sphere",t),l.typeOf.object("transform",n),s(r)||(r=new m),r.center=e.multiplyByPoint(n,t.center,r.center),r.radius=e.getMaximumScale(n)*t.radius,r};var G=new n;m.distanceSquaredTo=function(e,t){l.typeOf.object("sphere",e),l.typeOf.object("cartesian",t);let r=n.subtract(e.center,t,G),o=n.magnitude(r)-e.radius;return o<=0?0:o*o},m.transformWithoutScale=function(t,n,r){return l.typeOf.object("sphere",t),l.typeOf.object("transform",n),s(r)||(r=new m),r.center=e.multiplyByPoint(n,t.center,r.center),r.radius=t.radius,r};var H=new n;m.computePlaneDistances=function(e,t,r,o){l.typeOf.object("sphere",e),l.typeOf.object("position",t),l.typeOf.object("direction",r),s(o)||(o=new p);let a=n.subtract(e.center,t,H),c=n.dot(r,a);return o.start=c-e.radius,o.stop=c+e.radius,o};var L=new n,Y=new n,J=new n,K=new n,Q=new n,X=new r,F=Array(8);for(let e=0;e<8;++e)F[e]=new n;var $=new f;m.projectTo2D=function(e,t,r){l.typeOf.object("sphere",e),$._ellipsoid=o.default;let a=(t=i(t,$)).ellipsoid,c=e.center,u=e.radius,s;s=n.equals(c,n.ZERO)?n.clone(n.UNIT_X,L):a.geodeticSurfaceNormal(c,L);let d=n.cross(n.UNIT_Z,s,Y);n.normalize(d,d);let f=n.cross(s,d,J);n.normalize(f,f),n.multiplyByScalar(s,u,s),n.multiplyByScalar(f,u,f),n.multiplyByScalar(d,u,d);let y=n.negate(f,Q),p=n.negate(d,K),h=F[0];n.add(s,f,h),n.add(h,d,h),h=F[1],n.add(s,f,h),n.add(h,p,h),h=F[2],n.add(s,y,h),n.add(h,p,h),h=F[3],n.add(s,y,h),n.add(h,d,h),n.negate(s,s),h=F[4],n.add(s,f,h),n.add(h,d,h),h=F[5],n.add(s,f,h),n.add(h,p,h),h=F[6],n.add(s,y,h),n.add(h,p,h),h=F[7],n.add(s,y,h),n.add(h,d,h);let x=F.length;for(let e=0;e<x;++e){let r=F[e];n.add(c,r,r);let o=a.cartesianToCartographic(r,X);t.project(o,r)}let g=(c=(r=m.fromPoints(F,r)).center).x,z=c.y,w=c.z;return c.x=w,c.y=g,c.z=z,r},m.isOccluded=function(e,t){return l.typeOf.object("sphere",e),l.typeOf.object("occluder",t),!t.isBoundingSphereVisible(e)},m.equals=function(e,t){return e===t||s(e)&&s(t)&&n.equals(e.center,t.center)&&e.radius===t.radius},m.prototype.intersectPlane=function(e){return m.intersectPlane(this,e)},m.prototype.distanceSquaredTo=function(e){return m.distanceSquaredTo(this,e)},m.prototype.computePlaneDistances=function(e,t,n){return m.computePlaneDistances(this,e,t,n)},m.prototype.isOccluded=function(e){return m.isOccluded(this,e)},m.prototype.equals=function(e){return m.equals(this,e)},m.prototype.clone=function(e){return m.clone(this,e)},m.prototype.volume=function(){let e=this.radius;return v*e*e*e};var ee=m;export{f as a,y as b,p as c,ee as d};