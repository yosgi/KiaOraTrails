import{a as e,b as t,i as n}from"./chunk-YWRPWWKI.js";import{a as r}from"./chunk-VTVHUB7E.js";import{a as a,c as o,e as c}from"./chunk-JMSSU44E.js";import{a as u}from"./chunk-4UYSGV57.js";import{a as s,b as f}from"./chunk-GE5NEIZC.js";import{e as d}from"./chunk-35CVRQTC.js";var i={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"};i.getMathType=function(r){switch(r){case i.SCALAR:return Number;case i.VEC2:return o;case i.VEC3:return a;case i.VEC4:return e;case i.MAT2:return n;case i.MAT3:return c;case i.MAT4:return t;default:throw new s("attributeType is not a valid value.")}},i.getNumberOfComponents=function(e){switch(e){case i.SCALAR:return 1;case i.VEC2:return 2;case i.VEC3:return 3;case i.VEC4:case i.MAT2:return 4;case i.MAT3:return 9;case i.MAT4:return 16;default:throw new s("attributeType is not a valid value.")}},i.getAttributeLocationCount=function(e){switch(e){case i.SCALAR:case i.VEC2:case i.VEC3:case i.VEC4:return 1;case i.MAT2:return 2;case i.MAT3:return 3;case i.MAT4:return 4;default:throw new s("attributeType is not a valid value.")}},i.getGlslType=function(e){switch(f.typeOf.string("attributeType",e),e){case i.SCALAR:return"float";case i.VEC2:return"vec2";case i.VEC3:return"vec3";case i.VEC4:return"vec4";case i.MAT2:return"mat2";case i.MAT3:return"mat3";case i.MAT4:return"mat4";default:throw new s("attributeType is not a valid value.")}};var l=Object.freeze(i),h=1/256,y={};y.octEncodeInRange=function(e,t,n){if(f.defined("vector",e),f.defined("result",n),Math.abs(a.magnitudeSquared(e)-1)>u.EPSILON6)throw new s("vector must be normalized.");if(n.x=e.x/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),n.y=e.y/(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z)),e.z<0){let e=n.x,t=n.y;n.x=(1-Math.abs(t))*u.signNotZero(e),n.y=(1-Math.abs(e))*u.signNotZero(t)}return n.x=u.toSNorm(n.x,t),n.y=u.toSNorm(n.y,t),n},y.octEncode=function(e,t){return y.octEncodeInRange(e,255,t)};var m=new o,b=new Uint8Array(1);function g(e){return b[0]=e,b[0]}y.octEncodeToCartesian4=function(e,t){return y.octEncodeInRange(e,65535,m),t.x=g(m.x*h),t.y=g(m.x),t.z=g(m.y*h),t.w=g(m.y),t},y.octDecodeInRange=function(e,t,n,r){if(f.defined("result",r),e<0||e>n||t<0||t>n)throw new s(`x and y must be unsigned normalized integers between 0 and ${n}`);if(r.x=u.fromSNorm(e,n),r.y=u.fromSNorm(t,n),r.z=1-(Math.abs(r.x)+Math.abs(r.y)),r.z<0){let e=r.x;r.x=(1-Math.abs(r.y))*u.signNotZero(e),r.y=(1-Math.abs(e))*u.signNotZero(r.y)}return a.normalize(r,r)},y.octDecode=function(e,t,n){return y.octDecodeInRange(e,t,255,n)},y.octDecodeFromCartesian4=function(e,t){f.typeOf.object("encoded",e),f.typeOf.object("result",t);let n=e.x,r=e.y,a=e.z,o=e.w;if(n<0||n>255||r<0||r>255||a<0||a>255||o<0||o>255)throw new s("x, y, z, and w must be unsigned normalized integers between 0 and 255");return y.octDecodeInRange(256*n+r,256*a+o,65535,t)},y.octPackFloat=function(e){return f.defined("encoded",e),256*e.x+e.y};var E=new o;function M(e){return e>>1^-(1&e)}y.octEncodeFloat=function(e){return y.octEncode(e,E),y.octPackFloat(E)},y.octDecodeFloat=function(e,t){f.defined("value",e);let n=e/256,r=Math.floor(n);return y.octDecode(r,(n-r)*256,t)},y.octPack=function(e,t,n,r){f.defined("v1",e),f.defined("v2",t),f.defined("v3",n),f.defined("result",r);let a=y.octEncodeFloat(e),o=y.octEncodeFloat(t),c=y.octEncode(n,E);return r.x=65536*c.x+a,r.y=65536*c.y+o,r},y.octUnpack=function(e,t,n,r){f.defined("packed",e),f.defined("v1",t),f.defined("v2",n),f.defined("v3",r);let a=e.x/65536,o=Math.floor(a),c=(a-o)*65536,u=Math.floor(a=e.y/65536),s=(a-u)*65536;y.octDecodeFloat(c,t),y.octDecodeFloat(s,n),y.octDecode(o,u,r)},y.compressTextureCoordinates=function(e){return f.defined("textureCoordinates",e),4096*(4095*e.x|0)+(4095*e.y|0)},y.decompressTextureCoordinates=function(e,t){f.defined("compressed",e),f.defined("result",t);let n=Math.floor(e/4096);return t.x=n/4095,t.y=(e-4096*n)/4095,t},y.zigZagDeltaDecode=function(e,t,n){f.defined("uBuffer",e),f.defined("vBuffer",t),f.typeOf.number.equals("uBuffer.length","vBuffer.length",e.length,t.length),d(n)&&f.typeOf.number.equals("uBuffer.length","heightBuffer.length",e.length,n.length);let r=e.length,a=0,o=0,c=0;for(let u=0;u<r;++u)a+=M(e[u]),o+=M(t[u]),e[u]=a,t[u]=o,d(n)&&(c+=M(n[u]),n[u]=c)},y.dequantize=function(e,t,n,a){f.defined("typedArray",e),f.defined("componentDatatype",t),f.defined("type",n),f.defined("count",a);let o=l.getNumberOfComponents(n),c;switch(t){case r.BYTE:c=127;break;case r.UNSIGNED_BYTE:c=255;break;case r.SHORT:c=32767;break;case r.UNSIGNED_SHORT:c=65535;break;case r.INT:c=0x7fffffff;break;case r.UNSIGNED_INT:c=0xffffffff;break;default:throw new s(`Cannot dequantize component datatype: ${t}`)}let u=new Float32Array(a*o);for(let t=0;t<a;t++)for(let n=0;n<o;n++){let r=t*o+n;u[r]=Math.max(e[r]/c,-1)}return u},y.decodeRGB565=function(e,t){f.defined("typedArray",e);let n=3*e.length;d(t)&&f.typeOf.number.equals("result.length","typedArray.length * 3",t.length,n);let r=e.length;d(t)||(t=new Float32Array(3*r));let a=1/31,o=1/63;for(let n=0;n<r;n++){let r=e[n],c=r>>11,u=r>>5&63,s=31&r,f=3*n;t[f]=c*a,t[f+1]=u*o,t[f+2]=s*a}return t};var A=y;export{A as a};