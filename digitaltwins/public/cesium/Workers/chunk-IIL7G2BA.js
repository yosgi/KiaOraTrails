import{a as t}from"./chunk-BKSIEBAA.js";import{h as n,i as a}from"./chunk-YWRPWWKI.js";import{a as r,b as o,d as s}from"./chunk-JMSSU44E.js";import{a as e}from"./chunk-4UYSGV57.js";import{a as i}from"./chunk-GE5NEIZC.js";import{e as l}from"./chunk-35CVRQTC.js";var h=Math.cos,u=Math.sin,g=Math.sqrt,c={};c.computePosition=function(t,n,a,r,o,s,e){let i=n.radiiSquared,c=t.nwCorner,S=t.boundingRectangle,C=c.latitude-t.granYCos*r+o*t.granXSin,d=h(C),w=u(C),m=i.z*w,p=c.longitude+r*t.granYSin+o*t.granXCos,Y=d*h(p),f=d*u(p),X=i.x*Y,_=i.y*f,O=g(X*Y+_*f+m*w);if(s.x=X/O,s.y=_/O,s.z=m/O,a){let n=t.stNwCorner;l(n)?(C=n.latitude-t.stGranYCos*r+o*t.stGranXSin,e.x=((p=n.longitude+r*t.stGranYSin+o*t.stGranXCos)-t.stWest)*t.lonScalar,e.y=(C-t.stSouth)*t.latScalar):(e.x=(p-S.west)*t.lonScalar,e.y=(C-S.south)*t.latScalar)}};var S=new a,C=new r,d=new o,w=new r,m=new t;function p(t,n,o,e,i,l,h){let u=Math.cos(n),g=e*u,c=o*u,d=Math.sin(n),p=e*d,Y=o*d;m._ellipsoid=s.default,C=m.project(t,C),C=r.subtract(C,w,C);let f=a.fromRotation(n,S);C=a.multiplyByVector(f,C,C),C=r.add(C,w,C),t=m.unproject(C,t),l-=1,h-=1;let X=t.latitude,_=X+l*Y,O=X-g*h,W=X-g*h+l*Y,I=Math.max(X,_,O,W),M=Math.min(X,_,O,W),R=t.longitude,E=R+l*c,G=R+h*p,P=R+h*p+l*c;return{north:I,south:M,east:Math.max(R,E,G,P),west:Math.min(R,E,G,P),granYCos:g,granYSin:p,granXCos:c,granXSin:Y,nwCorner:t}}c.computeOptions=function(t,a,r,o,l,h,u){let g=t.east,c=t.west,S=t.north,C=t.south,Y=!1,f=!1;S===e.PI_OVER_TWO&&(Y=!0),C===-e.PI_OVER_TWO&&(f=!0);let X,_=S-C,O=Math.ceil((X=c>g?e.TWO_PI-c+g:g-c)/a)+1,W=Math.ceil(_/a)+1,I=X/(O-1),M=_/(W-1),R=n.northwest(t,h),E=n.center(t,d);(0!==r||0!==o)&&(E.longitude<R.longitude&&(E.longitude+=e.TWO_PI),m._ellipsoid=s.default,w=m.project(E,w));let G=n.clone(t,l),P={granYCos:M,granYSin:0,granXCos:I,granXSin:0,nwCorner:R,boundingRectangle:G,width:O,height:W,northCap:Y,southCap:f};if(0!==r){let t=p(R,r,I,M,E,O,W);if(S=t.north,C=t.south,g=t.east,c=t.west,S<-e.PI_OVER_TWO||S>e.PI_OVER_TWO||C<-e.PI_OVER_TWO||C>e.PI_OVER_TWO)throw new i("Rotated rectangle is invalid.  It crosses over either the north or south pole.");P.granYCos=t.granYCos,P.granYSin=t.granYSin,P.granXCos=t.granXCos,P.granXSin=t.granXSin,G.north=S,G.south=C,G.east=g,G.west=c}if(0!==o){r-=o;let t=n.northwest(G,u),a=p(t,r,I,M,E,O,W);P.stGranYCos=a.granYCos,P.stGranXCos=a.granXCos,P.stGranYSin=a.granYSin,P.stGranXSin=a.granXSin,P.stNwCorner=t,P.stWest=a.west,P.stSouth=a.south}return P};var Y=c;export{Y as a};