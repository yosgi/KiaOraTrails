import{a as t,b as a,d as i}from"./chunk-JMSSU44E.js";import{a as n}from"./chunk-4UYSGV57.js";import{a as e}from"./chunk-VLPNAR64.js";import{b as s}from"./chunk-GE5NEIZC.js";import{e as h}from"./chunk-35CVRQTC.js";function r(t,a,i,n,e,s,h){let r=t*i*(4+t*(4-3*i))/16;return(1-r)*t*a*(n+r*e*(h+r*s*(2*h*h-1)))}var d=new t,o=new t;function c(i,e,h,c){let u,l,M,_,g,p,f,m,v,H,O,S,b,q,U,A,R,w,j,E,P,k,y,C,T=t.normalize(c.cartographicToCartesian(e,o),d),I=t.normalize(c.cartographicToCartesian(h,o),o);s.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(t.angleBetween(T,I))-Math.PI),.0125),function(t,a,i,e,s,h,d){let o=(a-i)/a,c=h-e,u=Math.atan((1-o)*Math.tan(s)),l=Math.atan((1-o)*Math.tan(d)),M=Math.cos(u),_=Math.sin(u),g=Math.cos(l),p=Math.sin(l),f=M*g,m=M*p,v=_*p,H=_*g,O=c,S=n.TWO_PI,b=Math.cos(O),q=Math.sin(O),U,A,R,w,j;do{let t;b=Math.cos(O),q=Math.sin(O);let a=m-H*b;U=Math.atan2(R=Math.sqrt(g*g*q*q+a*a),A=v+f*b),0===R?(t=0,w=1):w=1-(t=f*q/R)*t,S=O,isFinite(j=A-2*v/w)||(j=0),O=c+r(o,t,w,U,R,A,j)}while(Math.abs(O-S)>n.EPSILON12);let E=w*(a*a-i*i)/(i*i),P=1+E*(4096+E*(E*(320-175*E)-768))/16384,k=E*(256+E*(E*(74-47*E)-128))/1024,y=j*j,C=Math.atan2(g*q,m-H*b),T=Math.atan2(M*q,m*b-H);t._distance=i*P*(U-k*R*(j+k*(A*(2*y-1)-k*j*(4*R*R-3)*(4*y-3)/6)/4)),t._startHeading=C,t._endHeading=T,t._uSquared=E}(i,c.maximumRadius,c.minimumRadius,e.longitude,e.latitude,h.longitude,h.latitude),i._start=a.clone(e,i._start),i._end=a.clone(h,i._end),i._start.height=0,i._end.height=0,u=i._uSquared,_=((l=i._ellipsoid.maximumRadius)-(M=i._ellipsoid.minimumRadius))/l,g=Math.cos(i._startHeading),p=Math.sin(i._startHeading),v=(m=1/Math.sqrt(1+(f=(1-_)*Math.tan(i._start.latitude))*f))*f,H=Math.atan2(f,g),q=Math.sqrt(b=1-(S=(O=m*p)*O)),R=(A=(U=u/4)*U)*U,w=A*A,j=1+U-3*A/4+5*R/4-175*w/64,E=1-U+15*A/8-35*R/8,P=1-3*U+35*A/4,k=1-5*U,y=j*H-E*Math.sin(2*H)*U/2-P*Math.sin(4*H)*A/16-k*Math.sin(6*H)*R/48-5*Math.sin(8*H)*w/512,(C=i._constants).a=l,C.b=M,C.f=_,C.cosineHeading=g,C.sineHeading=p,C.tanU=f,C.cosineU=m,C.sineU=v,C.sigma=H,C.sineAlpha=O,C.sineSquaredAlpha=S,C.cosineSquaredAlpha=b,C.cosineAlpha=q,C.u2Over4=U,C.u4Over16=A,C.u6Over64=R,C.u8Over256=w,C.a0=j,C.a1=E,C.a2=P,C.a3=k,C.distanceRatio=y}function u(t,n,s){let r=e(s,i.default);this._ellipsoid=r,this._start=new a,this._end=new a,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,h(t)&&h(n)&&c(this,t,n,r)}Object.defineProperties(u.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return s.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return s.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return s.defined("distance",this._distance),this._endHeading}}}),u.prototype.setEndPoints=function(t,a){s.defined("start",t),s.defined("end",a),c(this,t,a,this._ellipsoid)},u.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},u.prototype.interpolateUsingSurfaceDistance=function(t,i){s.defined("distance",this._distance);let n=this._constants,e=n.distanceRatio+t/n.b,d=Math.cos(2*e),o=Math.cos(4*e),c=Math.cos(6*e),u=Math.sin(2*e),l=Math.sin(4*e),M=Math.sin(6*e),_=Math.sin(8*e),g=e*e,p=n.u8Over256,f=n.u2Over4,m=n.u6Over64,v=n.u4Over16,H=e*g*2*p*d/3+e*(1-f+7*v/4-15*m/4+579*p/64-(v-15*m/4+187*p/16)*d-(5*m/4-115*p/16)*o-29*p*c/16)+(f/2-v+71*m/32-85*p/16)*u+(5*v/16-5*m/4+383*p/96)*l-g*((m-11*p/2)*u+5*p*l/2)+(29*m/96-29*p/16)*M+539*p*_/1536,O=Math.asin(Math.sin(H)*n.cosineAlpha),S=Math.atan(n.a/n.b*Math.tan(O));H-=n.sigma;let b=Math.cos(2*n.sigma+H),q=Math.sin(H),U=Math.cos(H),A=n.cosineU*U,R=n.sineU*q,w=Math.atan2(q*n.sineHeading,A-R*n.cosineHeading)-r(n.f,n.sineAlpha,n.cosineSquaredAlpha,H,q,U,b);return h(i)?(i.longitude=this._start.longitude+w,i.latitude=S,i.height=0,i):new a(this._start.longitude+w,S,0)};var l=u;export{l as a};