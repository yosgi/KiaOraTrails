import{a as t}from"./chunk-PWAJ3RAI.js";import{a as e}from"./chunk-ANLJ4KBN.js";import{a as r}from"./chunk-ID6SFQTL.js";import{a as n}from"./chunk-VLPNAR64.js";import{b as _}from"./chunk-GE5NEIZC.js";import{a as o,c as i,d as a,e as s}from"./chunk-35CVRQTC.js";var u=i((t,e)=>{var r,n=(r="u">typeof document&&document.currentScript?document.currentScript.src:void 0,"u">typeof __filename&&(r=r||__filename),function(t){var e,n,_="u">typeof(t=t||{})?t:{};_.ready=new Promise(function(t,r){e=t,n=r});var i,a={};for(i in _)_.hasOwnProperty(i)&&(a[i]=_[i]);var s=[],u=!1,R=!1,c=!1,f=!1;u="object"==typeof window,R="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,f=!u&&!c&&!R;var T="";c?(T=R?o("path").dirname(T)+"/":__dirname+"/",O=function(t,e){return C||(C=o("fs")),B||(B=o("path")),t=B.normalize(t),C.readFileSync(t,e?null:"utf8")},d=function(t){var e=O(t,!0);return e.buffer||(e=new Uint8Array(e)),G(e.buffer),e},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),s=process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof es))throw t}),process.on("unhandledRejection",tt),_.inspect=function(){return"[Emscripten Module object]"}):f?("u">typeof read&&(O=function(t){return read(t)}),d=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(G("object"==typeof(e=read(t,"binary"))),e)},"u">typeof scriptArgs?s=scriptArgs:"u">typeof arguments&&(s=arguments),"u">typeof print&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error="u">typeof printErr?printErr:print)):(u||R)&&(R?T=self.location.href:"u">typeof document&&document.currentScript&&(T=document.currentScript.src),r&&(T=r),T=0!==T.indexOf("blob:")?T.substr(0,T.lastIndexOf("/")+1):"",O=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},R&&(d=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),p=function(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response){e(n.response);return}r()},n.onerror=r,n.send(null)});var A=_.print||console.log.bind(console),l=_.printErr||console.warn.bind(console);for(i in a)a.hasOwnProperty(i)&&(_[i]=a[i]);a=null,_.arguments&&(s=_.arguments),_.thisProgram&&_.thisProgram,_.quit&&_.quit;var O,p,d,C,B,M,h=function(t){};_.wasmBinary&&(M=_.wasmBinary),_.noExitRuntime,"object"!=typeof WebAssembly&&tt("no native wasm support detected");var K,F=!1;function G(t,e){t||tt("Assertion failed: "+e)}var y="u">typeof TextDecoder?new TextDecoder("utf8"):void 0;function N(t,e,r){for(var n=e+r,_=e;t[_]&&!(_>=n);)++_;if(_-e>16&&t.subarray&&y)return y.decode(t.subarray(e,_));for(var o="";e<_;){var i=t[e++];if(!(128&i)){o+=String.fromCharCode(i);continue}var a=63&t[e++];if((224&i)==192){o+=String.fromCharCode((31&i)<<6|a);continue}var s=63&t[e++];if((i=(240&i)==224?(15&i)<<12|a<<6|s:(7&i)<<18|a<<12|s<<6|63&t[e++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}return o}function P(t,e){return t?N(w,t,e):""}var b="u">typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function v(t,e){for(var r=t,n=r>>1,_=n+e/2;!(n>=_)&&D[n];)++n;if((r=n<<1)-t>32&&b)return b.decode(w.subarray(t,r));for(var o="",i=0;!(i>=e/2);++i){var a=I[t+2*i>>1];if(0==a)break;o+=String.fromCharCode(a)}return o}function V(t,e,r){if(void 0===r&&(r=0x7fffffff),r<2)return 0;r-=2;for(var n=e,_=r<2*t.length?r/2:t.length,o=0;o<_;++o){var i=t.charCodeAt(o);I[e>>1]=i,e+=2}return I[e>>1]=0,e-n}function S(t){return 2*t.length}function m(t,e){for(var r=0,n="";!(r>=e/4);){var _=X[t+4*r>>2];if(0==_)break;if(++r,_>=65536){var o=_-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(_)}return n}function E(t,e,r){if(void 0===r&&(r=0x7fffffff),r<4)return 0;for(var n=e,_=n+r-4,o=0;o<t.length;++o){var i=t.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++o)),X[e>>2]=i,(e+=4)+4>_)break}return X[e>>2]=0,e-n}function U(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&++r,e+=4}return e}function g(t){x=t,_.HEAP8=L=new Int8Array(t),_.HEAP16=I=new Int16Array(t),_.HEAP32=X=new Int32Array(t),_.HEAPU8=w=new Uint8Array(t),_.HEAPU16=D=new Uint16Array(t),_.HEAPU32=$=new Uint32Array(t),_.HEAPF32=H=new Float32Array(t),_.HEAPF64=k=new Float64Array(t)}_.INITIAL_MEMORY;var x,L,w,I,D,X,$,H,k,W,j=[],z=[],Y=[],q=[],J=0,Z=null,Q=null;function tt(t){_.onAbort&&_.onAbort(t),l(t+=""),F=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw n(e),e}function te(t,e){return String.prototype.startsWith?t.startsWith(e):0===t.indexOf(e)}function tr(t){return te(t,"data:application/octet-stream;base64,")}function tn(t){return te(t,"file://")}_.preloadedImages={},_.preloadedAudios={};var t_="basis_transcoder.wasm";function to(t){try{if(t==t_&&M)return new Uint8Array(M);if(d)return d(t);throw"both async and sync fetching of the wasm failed"}catch(t){tt(t)}}function ti(t){for(;t.length>0;){var e=t.shift();if("function"==typeof e){e(_);continue}var r=e.func;"number"==typeof r?void 0===e.arg?W.get(r)():W.get(r)(e.arg):r(void 0===e.arg?null:e.arg)}}tr(t_)||(er=t_,t_=_.locateFile?_.locateFile(er,T):T+er);var ta={};function ts(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function tu(t){return this.fromWireType($[t>>2])}var tR={},tc={},tf={};function tT(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?"_"+t:t}function tA(t,e){return Function("body","return function "+(t=tT(t))+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(e)}function tl(t,e){var r=tA(e,function(t){this.name=e,this.message=t;var r=Error(t).stack;void 0!==r&&(this.stack=this.toString()+`
`+r.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var tO=void 0;function tp(t){throw new tO(t)}function td(t,e,r){function n(e){var n=r(e);n.length!==t.length&&tp("Mismatched type converter count");for(var _=0;_<t.length;++_)tF(t[_],n[_])}t.forEach(function(t){tf[t]=e});var _=Array(e.length),o=[],i=0;e.forEach(function(t,e){tc.hasOwnProperty(t)?_[e]=tc[t]:(o.push(t),tR.hasOwnProperty(t)||(tR[t]=[]),tR[t].push(function(){_[e]=tc[t],++i===o.length&&n(_)}))}),0===o.length&&n(_)}function tC(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw TypeError("Unknown type size: "+t)}}var tB=void 0;function tM(t){for(var e="",r=t;w[r];)e+=tB[w[r++]];return e}var th=void 0;function tK(t){throw new th(t)}function tF(t,e,r){if(r=r||{},!("argPackAdvance"in e))throw TypeError("registerType registeredInstance requires argPackAdvance");var n=e.name;if(t||tK('type "'+n+'" must have a positive integer typeid pointer'),tc.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;tK("Cannot register type '"+n+"' twice")}if(tc[t]=e,delete tf[t],tR.hasOwnProperty(t)){var _=tR[t];delete tR[t],_.forEach(function(t){t()})}}function tG(t){tK(t.$$.ptrType.registeredClass.name+" instance already deleted")}var ty=!1;function tN(t){}function tP(t){t.count.value-=1,0===t.count.value&&(t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr))}function tb(t){return typeof FinalizationGroup>"u"?(tb=function(t){return t},t):(ty=new FinalizationGroup(function(t){for(var e=t.next();!e.done;e=t.next()){var r=e.value;r.ptr?tP(r):console.warn("object already deleted: "+r.ptr)}}),tb=function(t){return ty.register(t,t.$$,t.$$),t},tN=function(t){ty.unregister(t.$$)},tb(t))}var tv=void 0,tV=[];function tS(){for(;tV.length;){var t=tV.pop();t.$$.deleteScheduled=!1,t.delete()}}function tm(){}var tE={};function tU(t,e,r){if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||tK("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}}function tg(t,e,r){_.hasOwnProperty(t)?((void 0===r||void 0!==_[t].overloadTable&&void 0!==_[t].overloadTable[r])&&tK("Cannot register public name '"+t+"' twice"),tU(_,t,t),_.hasOwnProperty(r)&&tK("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),_[t].overloadTable[r]=e):(_[t]=e,void 0!==r&&(_[t].numArguments=r))}function tx(t,e,r,n,_,o,i,a){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=_,this.getActualType=o,this.upcast=i,this.downcast=a,this.pureVirtualFunctions=[]}function tL(t,e,r){for(;e!==r;)e.upcast||tK("Expected null or instance of "+r.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function tw(t,e){if(null===e)return this.isReference&&tK("null is not a valid "+this.name),0;e.$$||tK('Cannot pass "'+t8(e)+'" as a '+this.name),e.$$.ptr||tK("Cannot pass deleted object as a pointer of type "+this.name);var r=e.$$.ptrType.registeredClass;return tL(e.$$.ptr,r,this.registeredClass)}function tI(t,e){if(null===e)return this.isReference&&tK("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;e.$$||tK('Cannot pass "'+t8(e)+'" as a '+this.name),e.$$.ptr||tK("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&tK("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var r,n=e.$$.ptrType.registeredClass;if(r=tL(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&tK("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:tK("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var _=e.clone();r=this.rawShare(r,t0(function(){_.delete()})),null!==t&&t.push(this.rawDestructor,r)}break;default:tK("Unsupporting sharing policy")}return r}function tD(t,e){if(null===e)return this.isReference&&tK("null is not a valid "+this.name),0;e.$$||tK('Cannot pass "'+t8(e)+'" as a '+this.name),e.$$.ptr||tK("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&tK("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var r=e.$$.ptrType.registeredClass;return tL(e.$$.ptr,r,this.registeredClass)}var tX={};function t$(t,e){return e.ptrType&&e.ptr||tp("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&tp("Both smartPtrType and smartPtr must be specified"),e.count={value:1},tb(Object.create(t,{$$:{value:e}}))}function tH(t,e,r,n,_,o,i,a,s,u,R){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=_,this.pointeeType=o,this.sharingPolicy=i,this.rawGetPointee=a,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=R,_||void 0!==e.baseClass?this.toWireType=tI:(n?this.toWireType=tw:this.toWireType=tD,this.destructorFunction=null)}function tk(t,e,r){_.hasOwnProperty(t)||tp("Replacing nonexistant public symbol"),void 0!==_[t].overloadTable&&void 0!==r?_[t].overloadTable[r]=e:(_[t]=e,_[t].argCount=r)}function tW(t,e){var r,n,o=-1!=(t=tM(t)).indexOf("j")?(r=t,n=[],function(){n.length=arguments.length;for(var t,o=0;o<arguments.length;o++)n[o]=arguments[o];return -1!=r.indexOf("j")?(t=_["dynCall_"+r],n&&n.length?t.apply(null,[e].concat(n)):t.call(null,e)):W.get(e).apply(null,n)}):W.get(e);return"function"!=typeof o&&tK("unknown function pointer with signature "+t+": "+e),o}var tj=void 0;function tz(t){var e=ea(t),r=tM(e);return ei(e),r}function tY(t,e){var r=[],n={};throw e.forEach(function t(e){if(!n[e]&&!tc[e]){if(tf[e]){tf[e].forEach(t);return}r.push(e),n[e]=!0}}),new tj(t+": "+r.map(tz).join([", "]))}function tq(t,e){for(var r=[],n=0;n<t;n++)r.push(X[(e>>2)+n]);return r}function tJ(t,e){if(!(t instanceof Function))throw TypeError("new_ called with constructor type "+typeof t+" which is not a function");var r=tA(t.name||"unknownFunctionName",function(){});r.prototype=t.prototype;var n=new r,_=t.apply(n,e);return _ instanceof Object?_:n}function tZ(t,e,r,n,_){var o=e.length;o<2&&tK("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==e[1]&&null!==r,a=!1,s=1;s<e.length;++s)if(null!==e[s]&&void 0===e[s].destructorFunction){a=!0;break}for(var u="void"!==e[0].name,R="",c="",s=0;s<o-2;++s)R+=(0!==s?", ":"")+"arg"+s,c+=(0!==s?", ":"")+"arg"+s+"Wired";var f="return function "+tT(t)+"("+R+`) {
if (arguments.length !== `+(o-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(o-2)+` args!');
}
`;a&&(f+=`var destructors = [];
`);var T=a?"destructors":"null",A=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],l=[tK,n,_,ts,e[0],e[1]];i&&(f+="var thisWired = classParam.toWireType("+T+`, this);
`);for(var s=0;s<o-2;++s)f+="var arg"+s+"Wired = argType"+s+".toWireType("+T+", arg"+s+"); // "+e[s+2].name+`
`,A.push("argType"+s),l.push(e[s+2]);if(i&&(c="thisWired"+(c.length>0?", ":"")+c),f+=(u?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+`);
`,a)f+=`runDestructors(destructors);
`;else for(var s=i?1:2;s<e.length;++s){var O=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==e[s].destructorFunction&&(f+=O+"_dtor("+O+"); // "+e[s].name+`
`,A.push(O+"_dtor"),l.push(e[s].destructorFunction))}return u&&(f+=`var ret = retType.fromWireType(rv);
return ret;
`),f+=`}
`,A.push(f),tJ(Function,A).apply(null,l)}var tQ=[],t1=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function t2(t){t>4&&0==--t1[t].refcount&&(t1[t]=void 0,tQ.push(t))}function t0(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=tQ.length?tQ.pop():t1.length;return t1[e]={refcount:1,value:t},e}}function t6(t,e){var r=tc[t];return void 0===r&&tK(e+" has unknown type "+tz(t)),r}function t8(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function t4(t){return t||tK("Cannot use deleted val. handle = "+t),t1[t].value}var t3={};function t5(t){var e=t3[t];return void 0===e?tM(t):e}var t9=[];function t7(){return"object"==typeof globalThis?globalThis:Function("return this")()}var et={},ee={mappings:{},buffers:[null,[],[]],printChar:function(t,e){var r=ee.buffers[t];0===e||10===e?((1===t?A:l)(N(r,0)),r.length=0):r.push(e)},varargs:void 0,get:function(){return ee.varargs+=4,X[ee.varargs-4>>2]},getStr:function(t){return P(t)},get64:function(t,e){return t}};tO=_.InternalError=tl(Error,"InternalError"),function(){for(var t=Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);tB=t}(),th=_.BindingError=tl(Error,"BindingError"),tm.prototype.isAliasOf=function(t){if(!(this instanceof tm)||!(t instanceof tm))return!1;for(var e=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=t.$$.ptrType.registeredClass,_=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)_=n.upcast(_),n=n.baseClass;return e===n&&r===_},tm.prototype.clone=function(){if(this.$$.ptr||tG(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=tb(Object.create(Object.getPrototypeOf(this),{$$:{value:{count:(t=this.$$).count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},tm.prototype.delete=function(){this.$$.ptr||tG(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&tK("Object already scheduled for deletion"),tN(this),tP(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},tm.prototype.isDeleted=function(){return!this.$$.ptr},tm.prototype.deleteLater=function(){return this.$$.ptr||tG(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&tK("Object already scheduled for deletion"),tV.push(this),1===tV.length&&tv&&tv(tS),this.$$.deleteScheduled=!0,this},tH.prototype.getPointee=function(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},tH.prototype.destructor=function(t){this.rawDestructor&&this.rawDestructor(t)},tH.prototype.argPackAdvance=8,tH.prototype.readValueFromPointer=tu,tH.prototype.deleteObject=function(t){null!==t&&t.delete()},tH.prototype.fromWireType=function(t){var e,r,n=this.getPointee(t);if(!n)return this.destructor(t),null;var _=tX[function(t,e){for(void 0===e&&tK("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(this.registeredClass,n)];if(void 0!==_){if(0===_.$$.count.value)return _.$$.ptr=n,_.$$.smartPtr=t,_.clone();var o=_.clone();return this.destructor(t),o}function i(){return this.isSmartPointer?t$(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:n,smartPtrType:this,smartPtr:t}):t$(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var a=tE[this.registeredClass.getActualType(n)];if(!a)return i.call(this);r=this.isConst?a.constPointerType:a.pointerType;var s=function t(e,r,n){if(r===n)return e;if(void 0===n.baseClass)return null;var _=t(e,r,n.baseClass);return null===_?null:n.downcast(_)}(n,this.registeredClass,r.registeredClass);return null===s?i.call(this):this.isSmartPointer?t$(r.registeredClass.instancePrototype,{ptrType:r,ptr:s,smartPtrType:this,smartPtr:t}):t$(r.registeredClass.instancePrototype,{ptrType:r,ptr:s})},_.getInheritedInstanceCount=function(){return Object.keys(tX).length},_.getLiveInheritedInstances=function(){var t=[];for(var e in tX)tX.hasOwnProperty(e)&&t.push(tX[e]);return t},_.flushPendingDeletes=tS,_.setDelayFunction=function(t){tv=t,tV.length&&tv&&tv(tS)},tj=_.UnboundTypeError=tl(Error,"UnboundTypeError"),_.count_emval_handles=function(){for(var t=0,e=5;e<t1.length;++e)void 0!==t1[e]&&++t;return t},_.get_first_emval=function(){for(var t=5;t<t1.length;++t)if(void 0!==t1[t])return t1[t];return null};var er,en,e_={t:function(t){var e=ta[t];delete ta[t];var r=e.rawConstructor,n=e.rawDestructor,_=e.fields;td([t],_.map(function(t){return t.getterReturnType}).concat(_.map(function(t){return t.setterArgumentType})),function(t){var o={};return _.forEach(function(e,r){var n=e.fieldName,i=t[r],a=e.getter,s=e.getterContext,u=t[r+_.length],R=e.setter,c=e.setterContext;o[n]={read:function(t){return i.fromWireType(a(s,t))},write:function(t,e){var r=[];R(c,t,u.toWireType(r,e)),ts(r)}}}),[{name:e.name,fromWireType:function(t){var e={};for(var r in o)e[r]=o[r].read(t);return n(t),e},toWireType:function(t,e){for(var _ in o)if(!(_ in e))throw TypeError('Missing field:  "'+_+'"');var i=r();for(_ in o)o[_].write(i,e[_]);return null!==t&&t.push(n,i),i},argPackAdvance:8,readValueFromPointer:tu,destructorFunction:n}]})},I:function(t,e,r,n,_){var o=tC(r);tF(t,{name:e=tM(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?n:_},argPackAdvance:8,readValueFromPointer:function(t){var n;if(1===r)n=L;else if(2===r)n=I;else if(4===r)n=X;else throw TypeError("Unknown boolean type size: "+e);return this.fromWireType(n[t>>o])},destructorFunction:null})},x:function(t,e,r,n,_,o,i,a,s,u,R,c,f){R=tM(R),o=tW(_,o),a&&(a=tW(i,a)),u&&(u=tW(s,u)),f=tW(c,f);var T=tT(R);tg(T,function(){tY("Cannot construct "+R+" due to unbound types",[n])}),td([t,e,r],n?[n]:[],function(e){e=e[0];var r,_=n?(r=e.registeredClass).instancePrototype:tm.prototype,i=tA(T,function(){if(Object.getPrototypeOf(this)!==s)throw new th("Use 'new' to construct "+R);if(void 0===c.constructor_body)throw new th(R+" has no accessible constructor");var t=c.constructor_body[arguments.length];if(void 0===t)throw new th("Tried to invoke ctor of "+R+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(c.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)}),s=Object.create(_,{constructor:{value:i}});i.prototype=s;var c=new tx(R,i,s,f,r,o,a,u),A=new tH(R,c,!0,!1,!1),l=new tH(R+"*",c,!1,!1,!1),O=new tH(R+" const*",c,!1,!0,!1);return tE[t]={pointerType:l,constPointerType:O},tk(T,i),[A,l,O]})},w:function(t,e,r,n,_,o){G(e>0);var i=tq(e,r);_=tW(n,_);var a=[o],s=[];td([],[t],function(t){var r="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new th("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){tY("Cannot construct "+t.name+" due to unbound types",i)},td([],i,function(n){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!=e-1&&tK(r+" called with "+arguments.length+" arguments, expected "+(e-1)),s.length=0,a.length=e;for(var t=1;t<e;++t)a[t]=n[t].toWireType(s,arguments[t-1]);var o=_.apply(null,a);return ts(s),n[0].fromWireType(o)},[]}),[]})},d:function(t,e,r,n,_,o,i,a){var s=tq(r,n);e=tM(e),o=tW(_,o),td([],[t],function(t){var n=(t=t[0]).name+"."+e;function _(){tY("Cannot call "+n+" due to unbound types",s)}a&&t.registeredClass.pureVirtualFunctions.push(e);var u=t.registeredClass.instancePrototype,R=u[e];return void 0===R||void 0===R.overloadTable&&R.className!==t.name&&R.argCount===r-2?(_.argCount=r-2,_.className=t.name,u[e]=_):(tU(u,e,n),u[e].overloadTable[r-2]=_),td([],s,function(_){var a=tZ(n,_,t,o,i);return void 0===u[e].overloadTable?(a.argCount=r-2,u[e]=a):u[e].overloadTable[r-2]=a,[]}),[]})},k:function(t,e,r){t=tM(t),td([],[e],function(e){return e=e[0],_[t]=e.fromWireType(r),[]})},H:function(t,e){tF(t,{name:e=tM(e),fromWireType:function(t){var e=t1[t].value;return t2(t),e},toWireType:function(t,e){return t0(e)},argPackAdvance:8,readValueFromPointer:tu,destructorFunction:null})},n:function(t,e,r,n){var _=tC(r);function o(){}e=tM(e),o.values={},tF(t,{name:e,constructor:o,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:function(t,e,r){switch(e){case 0:return function(t){var e=r?L:w;return this.fromWireType(e[t])};case 1:return function(t){var e=r?I:D;return this.fromWireType(e[t>>1])};case 2:return function(t){var e=r?X:$;return this.fromWireType(e[t>>2])};default:throw TypeError("Unknown integer type: "+t)}}(e,_,n),destructorFunction:null}),tg(e,o)},a:function(t,e,r){var n=t6(t,"enum");e=tM(e);var _=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:tA(n.name+"_"+e,function(){})}});_.values[r]=o,_[e]=o},A:function(t,e,r){var n=tC(r);tF(t,{name:e=tM(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw TypeError('Cannot convert "'+t8(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:function(t,e){switch(e){case 2:return function(t){return this.fromWireType(H[t>>2])};case 3:return function(t){return this.fromWireType(k[t>>3])};default:throw TypeError("Unknown float type: "+t)}}(e,n),destructorFunction:null})},i:function(t,e,r,n,_,o){var i=tq(e,r);t=tM(t),_=tW(n,_),tg(t,function(){tY("Cannot call "+t+" due to unbound types",i)},e-1),td([],i,function(r){var n=[r[0],null].concat(r.slice(1));return tk(t,tZ(t,n,null,_,o),e-1),[]})},j:function(t,e,r,n,_){e=tM(e),-1===_&&(_=0xffffffff);var o=tC(r),i=function(t){return t};if(0===n){var a=32-8*r;i=function(t){return t<<a>>>a}}var s=-1!=e.indexOf("unsigned");tF(t,{name:e,fromWireType:i,toWireType:function(t,r){if("number"!=typeof r&&"boolean"!=typeof r)throw TypeError('Cannot convert "'+t8(r)+'" to '+this.name);if(r<n||r>_)throw TypeError('Passing a number "'+t8(r)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+n+", "+_+"]!");return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:function(t,e,r){switch(e){case 0:return r?function(t){return L[t]}:function(t){return w[t]};case 1:return r?function(t){return I[t>>1]}:function(t){return D[t>>1]};case 2:return r?function(t){return X[t>>2]}:function(t){return $[t>>2]};default:throw TypeError("Unknown integer type: "+t)}}(e,o,0!==n),destructorFunction:null})},h:function(t,e,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function _(t){t>>=2;var e=$,r=e[t],_=e[t+1];return new n(x,_,r)}tF(t,{name:r=tM(r),fromWireType:_,argPackAdvance:8,readValueFromPointer:_},{ignoreDuplicateRegistrations:!0})},B:function(t,e){var r="std::string"===(e=tM(e));tF(t,{name:e,fromWireType:function(t){var e,n=$[t>>2];if(r)for(var _=t+4,o=0;o<=n;++o){var i=t+4+o;if(o==n||0==w[i]){var a=i-_,s=P(_,a);void 0===e?e=s:(e+="\0",e+=s),_=i+1}}else{for(var u=Array(n),o=0;o<n;++o)u[o]=String.fromCharCode(w[t+4+o]);e=u.join("")}return ei(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n,_="string"==typeof e;_||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||tK("Cannot pass non-string to std::string");var o=(r&&_?function(){return function(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?++e:n<=2047?e+=2:n<=65535?e+=3:e+=4}return e}(e)}:function(){return e.length})(),i=eo(4+o+1);if($[i>>2]=o,r&&_)(function(t,e,r,n){if(n>0){for(var _=r+n-1,o=0;o<t.length;++o){var i=t.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++o)),i<=127){if(r>=_)break;e[r++]=i}else if(i<=2047){if(r+1>=_)break;e[r++]=192|i>>6,e[r++]=128|63&i}else if(i<=65535){if(r+2>=_)break;e[r++]=224|i>>12,e[r++]=128|i>>6&63,e[r++]=128|63&i}else{if(r+3>=_)break;e[r++]=240|i>>18,e[r++]=128|i>>12&63,e[r++]=128|i>>6&63,e[r++]=128|63&i}}e[r]=0}})(e,w,i+4,o+1);else if(_)for(var a=0;a<o;++a){var s=e.charCodeAt(a);s>255&&(ei(i),tK("String has UTF-16 code units that do not fit in 8 bits")),w[i+4+a]=s}else for(var a=0;a<o;++a)w[i+4+a]=e[a];return null!==t&&t.push(ei,i),i},argPackAdvance:8,readValueFromPointer:tu,destructorFunction:function(t){ei(t)}})},v:function(t,e,r){var n,_,o,i,a;r=tM(r),2===e?(n=v,_=V,i=S,o=function(){return D},a=1):4===e&&(n=m,_=E,i=U,o=function(){return $},a=2),tF(t,{name:r,fromWireType:function(t){for(var r,_=$[t>>2],i=o(),s=t+4,u=0;u<=_;++u){var R=t+4+u*e;if(u==_||0==i[R>>a]){var c=R-s,f=n(s,c);void 0===r?r=f:(r+="\0",r+=f),s=R+e}}return ei(t),r},toWireType:function(t,n){"string"!=typeof n&&tK("Cannot pass non-string to C++ string type "+r);var o=i(n),s=eo(4+o+e);return $[s>>2]=o>>a,_(n,s+4,o+e),null!==t&&t.push(ei,s),s},argPackAdvance:8,readValueFromPointer:tu,destructorFunction:function(t){ei(t)}})},u:function(t,e,r,n,_,o){ta[t]={name:tM(e),rawConstructor:tW(r,n),rawDestructor:tW(_,o),fields:[]}},c:function(t,e,r,n,_,o,i,a,s,u){ta[t].fields.push({fieldName:tM(e),getterReturnType:r,getter:tW(n,_),getterContext:o,setterArgumentType:i,setter:tW(a,s),setterContext:u})},J:function(t,e){tF(t,{isVoid:!0,name:e=tM(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},m:function(t,e,r){t=t4(t),e=t6(e,"emval::as");var n=[],_=t0(n);return X[r>>2]=_,e.toWireType(n,t)},s:function(t,e,r,n){t=t9[t],t(e=t4(e),r=t5(r),null,n)},b:t2,y:function(t){return 0===t?t0(t7()):(t=t5(t),t0(t7()[t]))},p:function(t,e){for(var r,n,_=function(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=t6(X[(e>>2)+n],"parameter "+n);return r}(t,e),o=_[0],i=o.name+"_$"+_.slice(1).map(function(t){return t.name}).join("_")+"$",a=["retType"],s=[o],u="",R=0;R<t-1;++R)u+=(0!==R?", ":"")+"arg"+R,a.push("argType"+R),s.push(_[1+R]);for(var c=tT("methodCaller_"+i),f="return function "+c+`(handle, name, destructors, args) {
`,T=0,R=0;R<t-1;++R)f+="    var arg"+R+" = argType"+R+".readValueFromPointer(args"+(T?"+"+T:"")+`);
`,T+=_[R+1].argPackAdvance;f+="    var rv = handle[name]("+u+`);
`;for(var R=0;R<t-1;++R)_[R+1].deleteObject&&(f+="    argType"+R+".deleteObject(arg"+R+`);
`);return o.isVoid||(f+=`    return retType.toWireType(destructors, rv);
`),f+=`};
`,a.push(f),r=tJ(Function,a).apply(null,s),n=t9.length,t9.push(r),n},r:function(t){return t0(_[t=t5(t)])},e:function(t,e){return t0((t=t4(t))[e=t4(e)])},g:function(t){t>4&&(t1[t].refcount+=1)},q:function(t,e,r,n){t=t4(t);var o=et[e];return o||(o=function(t){for(var e="",r=0;r<t;++r)e+=(0!==r?", ":"")+"arg"+r;for(var n="return function emval_allocator_"+t+`(constructor, argTypes, args) {
`,r=0;r<t;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+`");
var arg`+r+" = argType"+r+`.readValueFromPointer(args);
args += argType`+r+`['argPackAdvance'];
`;return Function("requireRegisteredType","Module","__emval_register",n+="var obj = new constructor("+e+`);
return __emval_register(obj);
}
`)(t6,_,t0)}(e),et[e]=o),o(t,r,n)},f:function(t){return t0(t5(t))},l:function(t){ts(t1[t].value),t2(t)},o:function(){tt()},E:function(t,e,r){w.copyWithin(t,e,e+r)},F:function(t){var e=w.length;if((t>>>=0)>0x80000000)return!1;for(var r=1;r<=4;r*=2){var n,_=e*(1+.2/r);if(_=Math.min(_,t+0x6000000),function(t){try{return K.grow(t-x.byteLength+65535>>>16),g(K.buffer),1}catch{}}(Math.min(0x80000000,((n=Math.max(t,_))%65536>0&&(n+=65536-n%65536),n))))return!0}return!1},G:function(t){return 0},C:function(t,e,r,n,_){},z:function(t,e,r,n){for(var _=0,o=0;o<r;o++){for(var i=X[e+8*o>>2],a=X[e+(8*o+4)>>2],s=0;s<a;s++)ee.printChar(t,w[i+s]);_+=a}return X[n>>2]=_,0},D:function(t){h(0|t)}},eo=(function(){var t={a:e_};function e(t,e){var r;_.asm=t.exports,g((K=_.asm.K).buffer),W=_.asm.O,r=_.asm.L,z.unshift(r),function(t){if(J--,_.monitorRunDependencies&&_.monitorRunDependencies(J),0==J&&(null!==Z&&(clearInterval(Z),Z=null),Q)){var e=Q;Q=null,e()}}(0)}function r(t){e(t.instance)}function o(e){return(function(){if(!M&&(u||R)){if("function"==typeof fetch&&!tn(t_))return fetch(t_,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+t_+"'";return t.arrayBuffer()}).catch(function(){return to(t_)});if(p)return new Promise(function(t,e){p(t_,function(e){t(new Uint8Array(e))},e)})}return Promise.resolve().then(function(){return to(t_)})})().then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(t){l("failed to asynchronously prepare wasm: "+t),tt(t)})}if(J++,_.monitorRunDependencies&&_.monitorRunDependencies(J),_.instantiateWasm)try{return _.instantiateWasm(t,e)}catch(t){return l("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||tr(t_)||tn(t_)||"function"!=typeof fetch?o(r):fetch(t_,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(r,function(t){return l("wasm streaming compile failed: "+t),l("falling back to ArrayBuffer instantiation"),o(r)})})).catch(n)}(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.L).apply(null,arguments)},_._malloc=function(){return(eo=_._malloc=_.asm.M).apply(null,arguments)}),ei=_._free=function(){return(ei=_._free=_.asm.N).apply(null,arguments)},ea=_.___getTypeName=function(){return(ea=_.___getTypeName=_.asm.P).apply(null,arguments)};function es(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function eu(t){t=t||s,J>0||(function(){if(_.preRun)for("function"==typeof _.preRun&&(_.preRun=[_.preRun]);_.preRun.length;){var t;t=_.preRun.shift(),j.unshift(t)}ti(j)}(),J>0)||(_.setStatus?(_.setStatus("Running..."),setTimeout(function(){setTimeout(function(){_.setStatus("")},1),r()},1)):r());function r(){en||(en=!0,_.calledRun=!0,F||(ti(z),ti(Y),e(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),function(){if(_.postRun)for("function"==typeof _.postRun&&(_.postRun=[_.postRun]);_.postRun.length;){var t;t=_.postRun.shift(),q.unshift(t)}ti(q)}()))}}if(_.___embind_register_native_and_builtin_types=function(){return(_.___embind_register_native_and_builtin_types=_.asm.Q).apply(null,arguments)},_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.R).apply(null,arguments)},Q=function t(){en||eu(),en||(Q=t)},_.run=eu,_.preInit)for("function"==typeof _.preInit&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return eu(),t.ready});"object"==typeof t&&"object"==typeof e?e.exports=n:"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof t&&(t.BASIS=n)}),R={UNSIGNED_BYTE:e.UNSIGNED_BYTE,UNSIGNED_SHORT:e.UNSIGNED_SHORT,UNSIGNED_INT:e.UNSIGNED_INT,FLOAT:e.FLOAT,HALF_FLOAT:e.HALF_FLOAT_OES,UNSIGNED_INT_24_8:e.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:e.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:e.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:e.UNSIGNED_SHORT_5_6_5};R.toWebGLConstant=function(t,r){switch(t){case R.UNSIGNED_BYTE:return e.UNSIGNED_BYTE;case R.UNSIGNED_SHORT:return e.UNSIGNED_SHORT;case R.UNSIGNED_INT:return e.UNSIGNED_INT;case R.FLOAT:return e.FLOAT;case R.HALF_FLOAT:return r.webgl2?e.HALF_FLOAT:e.HALF_FLOAT_OES;case R.UNSIGNED_INT_24_8:return e.UNSIGNED_INT_24_8;case R.UNSIGNED_SHORT_4_4_4_4:return e.UNSIGNED_SHORT_4_4_4_4;case R.UNSIGNED_SHORT_5_5_5_1:return e.UNSIGNED_SHORT_5_5_5_1;case R.UNSIGNED_SHORT_5_6_5:return R.UNSIGNED_SHORT_5_6_5}},R.isPacked=function(t){return t===R.UNSIGNED_INT_24_8||t===R.UNSIGNED_SHORT_4_4_4_4||t===R.UNSIGNED_SHORT_5_5_5_1||t===R.UNSIGNED_SHORT_5_6_5},R.sizeInBytes=function(t){switch(t){case R.UNSIGNED_BYTE:return 1;case R.UNSIGNED_SHORT:case R.UNSIGNED_SHORT_4_4_4_4:case R.UNSIGNED_SHORT_5_5_5_1:case R.UNSIGNED_SHORT_5_6_5:case R.HALF_FLOAT:return 2;case R.UNSIGNED_INT:case R.FLOAT:case R.UNSIGNED_INT_24_8:return 4}},R.validate=function(t){return t===R.UNSIGNED_BYTE||t===R.UNSIGNED_SHORT||t===R.UNSIGNED_INT||t===R.FLOAT||t===R.HALF_FLOAT||t===R.UNSIGNED_INT_24_8||t===R.UNSIGNED_SHORT_4_4_4_4||t===R.UNSIGNED_SHORT_5_5_5_1||t===R.UNSIGNED_SHORT_5_6_5},R.getTypedArrayConstructor=function(t){let e=R.sizeInBytes(t);return e===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:e===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:e===Float32Array.BYTES_PER_ELEMENT&&t===R.FLOAT?Float32Array:Uint32Array};var c=Object.freeze(R),f={DEPTH_COMPONENT:e.DEPTH_COMPONENT,DEPTH_STENCIL:e.DEPTH_STENCIL,ALPHA:e.ALPHA,RED:e.RED,RG:e.RG,RGB:e.RGB,RGBA:e.RGBA,LUMINANCE:e.LUMINANCE,LUMINANCE_ALPHA:e.LUMINANCE_ALPHA,RGB_DXT1:e.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:e.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:e.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:e.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:e.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:e.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:e.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:e.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:e.COMPRESSED_RGBA_BPTC_UNORM};f.componentsLength=function(t){switch(t){case f.RGB:return 3;case f.RGBA:return 4;case f.LUMINANCE_ALPHA:case f.RG:return 2;case f.ALPHA:case f.RED:case f.LUMINANCE:default:return 1}},f.validate=function(t){return t===f.DEPTH_COMPONENT||t===f.DEPTH_STENCIL||t===f.ALPHA||t===f.RED||t===f.RG||t===f.RGB||t===f.RGBA||t===f.LUMINANCE||t===f.LUMINANCE_ALPHA||t===f.RGB_DXT1||t===f.RGBA_DXT1||t===f.RGBA_DXT3||t===f.RGBA_DXT5||t===f.RGB_PVRTC_4BPPV1||t===f.RGB_PVRTC_2BPPV1||t===f.RGBA_PVRTC_4BPPV1||t===f.RGBA_PVRTC_2BPPV1||t===f.RGBA_ASTC||t===f.RGB_ETC1||t===f.RGB8_ETC2||t===f.RGBA8_ETC2_EAC||t===f.RGBA_BC7},f.isColorFormat=function(t){return t===f.RED||t===f.ALPHA||t===f.RGB||t===f.RGBA||t===f.LUMINANCE||t===f.LUMINANCE_ALPHA},f.isDepthFormat=function(t){return t===f.DEPTH_COMPONENT||t===f.DEPTH_STENCIL},f.isCompressedFormat=function(t){return t===f.RGB_DXT1||t===f.RGBA_DXT1||t===f.RGBA_DXT3||t===f.RGBA_DXT5||t===f.RGB_PVRTC_4BPPV1||t===f.RGB_PVRTC_2BPPV1||t===f.RGBA_PVRTC_4BPPV1||t===f.RGBA_PVRTC_2BPPV1||t===f.RGBA_ASTC||t===f.RGB_ETC1||t===f.RGB8_ETC2||t===f.RGBA8_ETC2_EAC||t===f.RGBA_BC7},f.isDXTFormat=function(t){return t===f.RGB_DXT1||t===f.RGBA_DXT1||t===f.RGBA_DXT3||t===f.RGBA_DXT5},f.isPVRTCFormat=function(t){return t===f.RGB_PVRTC_4BPPV1||t===f.RGB_PVRTC_2BPPV1||t===f.RGBA_PVRTC_4BPPV1||t===f.RGBA_PVRTC_2BPPV1},f.isASTCFormat=function(t){return t===f.RGBA_ASTC},f.isETC1Format=function(t){return t===f.RGB_ETC1},f.isETC2Format=function(t){return t===f.RGB8_ETC2||t===f.RGBA8_ETC2_EAC},f.isBC7Format=function(t){return t===f.RGBA_BC7},f.compressedTextureSizeInBytes=function(t,e,r){switch(t){case f.RGB_DXT1:case f.RGBA_DXT1:case f.RGB_ETC1:case f.RGB8_ETC2:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*8;case f.RGBA_DXT3:case f.RGBA_DXT5:case f.RGBA_ASTC:case f.RGBA8_ETC2_EAC:return Math.floor((e+3)/4)*Math.floor((r+3)/4)*16;case f.RGB_PVRTC_4BPPV1:case f.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(e,8)*Math.max(r,8)*4+7)/8);case f.RGB_PVRTC_2BPPV1:case f.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(e,16)*Math.max(r,8)*2+7)/8);case f.RGBA_BC7:return Math.ceil(e/4)*Math.ceil(r/4)*16;default:return 0}},f.textureSizeInBytes=function(t,e,r,n){let _=f.componentsLength(t);return c.isPacked(e)&&(_=1),_*c.sizeInBytes(e)*r*n},f.alignmentInBytes=function(t,e,r){let n=f.textureSizeInBytes(t,e,r,1)%4;return 0===n?4:2===n?2:1},f.createTypedArray=function(t,e,r,n){return new(c.getTypedArrayConstructor(e))(f.componentsLength(t)*r*n)},f.flipY=function(t,e,r,n,_){if(1===_)return t;let o=f.createTypedArray(e,r,n,_),i=f.componentsLength(e),a=n*i;for(let e=0;e<_;++e){let r=e*n*i,s=(_-e-1)*n*i;for(let e=0;e<a;++e)o[s+e]=t[r+e]}return o},f.toInternalFormat=function(t,r,n){if(!n.webgl2)return t;if(t===f.DEPTH_STENCIL)return e.DEPTH24_STENCIL8;if(t===f.DEPTH_COMPONENT){if(r===c.UNSIGNED_SHORT)return e.DEPTH_COMPONENT16;if(r===c.UNSIGNED_INT)return e.DEPTH_COMPONENT24}if(r===c.FLOAT)switch(t){case f.RGBA:return e.RGBA32F;case f.RGB:return e.RGB32F;case f.RG:return e.RG32F;case f.RED:return e.R32F}if(r===c.HALF_FLOAT)switch(t){case f.RGBA:return e.RGBA16F;case f.RGB:return e.RGB16F;case f.RG:return e.RG16F;case f.RED:return e.R16F}return t};var T=Object.freeze(f),A=Object.freeze({VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:0x3b9d2b61,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:0x3b9d2b62,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:0x3b9d2b63,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:0x3b9d2b64,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:0x3b9d2b65,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:0x3b9d2b66,VK_FORMAT_R10X6_UNORM_PACK16:0x3b9d2b67,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:0x3b9d2b68,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:0x3b9d2b69,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:0x3b9d2b6a,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:0x3b9d2b6b,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:0x3b9d2b6c,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:0x3b9d2b6d,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:0x3b9d2b6e,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:0x3b9d2b6f,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:0x3b9d2b70,VK_FORMAT_R12X4_UNORM_PACK16:0x3b9d2b71,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:0x3b9d2b72,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:0x3b9d2b73,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:0x3b9d2b74,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:0x3b9d2b75,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:0x3b9d2b76,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:0x3b9d2b77,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:0x3b9d2b78,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:0x3b9d2b79,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:0x3b9d2b7a,VK_FORMAT_G16B16G16R16_422_UNORM:0x3b9d2b7b,VK_FORMAT_B16G16R16G16_422_UNORM:0x3b9d2b7c,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:0x3b9d2b7d,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:0x3b9d2b7e,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:0x3b9d2b7f,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:0x3b9d2b80,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:0x3b9d2b81,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:0x3b9b9cf1,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:0x3b9b9cf2,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:0x3b9b9cf3,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:0x3b9b9cf4,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:0x3b9b9cf5,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:0x3b9b9cf6,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:0x3b9b9cf7,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:0x3b9bcbd1,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:0x3b9bcbd2,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:0x3b9bcbd3,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:0x3b9bcbd4,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:0x3b9bcbd5,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:0x3b9bcbd6,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:0x3b9bcbd7,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:0x3b9bcbd8,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:0x3b9bcbd9,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:0x3b9bcbda,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:0x3b9bcbdb,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:0x3b9bcbdc,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:0x3b9bcbdd,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:0x3b9d2b61,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:0x3b9d2b62,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:0x3b9d2b63,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:0x3b9d2b64,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:0x3b9d2b65,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:0x3b9d2b66,VK_FORMAT_R10X6_UNORM_PACK16_KHR:0x3b9d2b67,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:0x3b9d2b68,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:0x3b9d2b69,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:0x3b9d2b6a,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:0x3b9d2b6b,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:0x3b9d2b6c,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:0x3b9d2b6d,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:0x3b9d2b6e,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:0x3b9d2b6f,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:0x3b9d2b70,VK_FORMAT_R12X4_UNORM_PACK16_KHR:0x3b9d2b71,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:0x3b9d2b72,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:0x3b9d2b73,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:0x3b9d2b74,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:0x3b9d2b75,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:0x3b9d2b76,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:0x3b9d2b77,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:0x3b9d2b78,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:0x3b9d2b79,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:0x3b9d2b7a,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:0x3b9d2b7b,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:0x3b9d2b7c,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:0x3b9d2b7d,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:0x3b9d2b7e,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:0x3b9d2b7f,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:0x3b9d2b80,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:0x3b9d2b81}),l=class{constructor(t,e,r,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+e,r),this._littleEndian=n,this._offset=0}_nextUint8(){let t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){let t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){let t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){let t=this._dataView.getUint32(this._offset,this._littleEndian),e=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t+0x100000000*e}_nextInt32(){let t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint8Array(t){let e=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,t);return this._offset+=t,e}_skip(t){return this._offset+=t,this}_scan(t,e=0){let r=this._offset,n=0;for(;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}};new Uint8Array([0]);var O=[171,75,84,88,32,50,48,187,13,10,26,10];function p(t){return new TextDecoder().decode(t)}var d,C=a(u(),1),B=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"];async function M(t,e){let r=t.webAssemblyConfig,_=n(C.default,self.BASIS);return(d=s(r.wasmBinaryFile)?await _(r):await _()).initializeBasis(),!0}var h=t(function(t,e){return s(t.webAssemblyConfig)?M(t,e):function(t,e){_.typeOf.object("transcoderModule",d);let n=t.ktx2Buffer,o=t.supportedTargetFormats,i;try{i=function(t){let e=new Uint8Array(t.buffer,t.byteOffset,O.length);if(e[0]!==O[0]||e[1]!==O[1]||e[2]!==O[2]||e[3]!==O[3]||e[4]!==O[4]||e[5]!==O[5]||e[6]!==O[6]||e[7]!==O[7]||e[8]!==O[8]||e[9]!==O[9]||e[10]!==O[10]||e[11]!==O[11])throw Error("Missing KTX 2.0 identifier.");let r={vkFormat:0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,supercompressionScheme:0,levels:[],dataFormatDescriptor:[{vendorId:0,descriptorType:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null},n=17*Uint32Array.BYTES_PER_ELEMENT,_=new l(t,O.length,n,!0);r.vkFormat=_._nextUint32(),r.typeSize=_._nextUint32(),r.pixelWidth=_._nextUint32(),r.pixelHeight=_._nextUint32(),r.pixelDepth=_._nextUint32(),r.layerCount=_._nextUint32(),r.faceCount=_._nextUint32();let o=_._nextUint32();r.supercompressionScheme=_._nextUint32();let i=_._nextUint32(),a=_._nextUint32(),s=_._nextUint32(),u=_._nextUint32(),R=_._nextUint64(),c=_._nextUint64(),f=new l(t,O.length+n,24*o,!0);for(let e=0;e<o;e++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});let T=new l(t,i,a,!0);T._skip(4);let A=T._nextUint16(),d=T._nextUint16(),C=T._nextUint16(),B=T._nextUint16(),M={vendorId:A,descriptorType:d,versionNumber:C,colorModel:T._nextUint8(),colorPrimaries:T._nextUint8(),transferFunction:T._nextUint8(),flags:T._nextUint8(),texelBlockDimension:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],bytesPlane:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],samples:[]},h=(B/4-6)/4;for(let t=0;t<h;t++){let e={bitOffset:T._nextUint16(),bitLength:T._nextUint8(),channelType:T._nextUint8(),samplePosition:[T._nextUint8(),T._nextUint8(),T._nextUint8(),T._nextUint8()],sampleLower:Number.NEGATIVE_INFINITY,sampleUpper:Number.POSITIVE_INFINITY};64&e.channelType?(e.sampleLower=T._nextInt32(),e.sampleUpper=T._nextInt32()):(e.sampleLower=T._nextUint32(),e.sampleUpper=T._nextUint32()),M.samples[t]=e}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(M);let K=new l(t,s,u,!0);for(;K._offset<u;){let t=K._nextUint32(),e=K._scan(t),n=p(e);if(r.keyValue[n]=K._nextUint8Array(t-e.byteLength-1),n.match(/^ktx/i)){let t=p(r.keyValue[n]);r.keyValue[n]=t.substring(0,t.lastIndexOf("\0"))}let _=t%4?4-t%4:0;K._skip(_)}if(c<=0)return r;let F=new l(t,R,c,!0),G=F._nextUint16(),y=F._nextUint16(),N=F._nextUint32(),P=F._nextUint32(),b=F._nextUint32(),v=F._nextUint32(),V=[];for(let t=0;t<o;t++)V.push({imageFlags:F._nextUint32(),rgbSliceByteOffset:F._nextUint32(),rgbSliceByteLength:F._nextUint32(),alphaSliceByteOffset:F._nextUint32(),alphaSliceByteLength:F._nextUint32()});let S=R+F._offset,m=S+N,E=m+P,U=E+b;return r.globalData={endpointCount:G,selectorCount:y,imageDescs:V,endpointsData:new Uint8Array(t.buffer,t.byteOffset+S,N),selectorsData:new Uint8Array(t.buffer,t.byteOffset+m,P),tablesData:new Uint8Array(t.buffer,t.byteOffset+E,b),extendedData:new Uint8Array(t.buffer,t.byteOffset+U,v)},r}(n)}catch{throw new r("Invalid KTX2 file.")}if(0!==i.layerCount)throw new r("KTX2 texture arrays are not supported.");if(0!==i.pixelDepth)throw new r("KTX2 3D textures are unsupported.");let a=i.dataFormatDescriptor[0],u=Array(i.levelCount);return 0===i.vkFormat&&(163===a.colorModel||166===a.colorModel)?function(t,e,n,_,o,i){let a=new _.KTX2File(t),u=a.getWidth(),R=a.getHeight(),c=a.getLevels(),f=a.getHasAlpha();if(!(u>0)||!(R>0)||!(c>0))throw a.close(),a.delete(),new r("Invalid KTX2 file");let A,l,O=e.dataFormatDescriptor[0],p=_.transcoder_texture_format;if(163===O.colorModel){if(n.etc)A=f?T.RGBA8_ETC2_EAC:T.RGB8_ETC2,l=f?p.cTFETC2_RGBA:p.cTFETC1_RGB;else if(n.etc1&&!f)A=T.RGB_ETC1,l=p.cTFETC1_RGB;else if(n.s3tc)A=f?T.RGBA_DXT5:T.RGB_DXT1,l=f?p.cTFBC3_RGBA:p.cTFBC1_RGB;else if(n.pvrtc)A=f?T.RGBA_PVRTC_4BPPV1:T.RGB_PVRTC_4BPPV1,l=f?p.cTFPVRTC1_4_RGBA:p.cTFPVRTC1_4_RGB;else if(n.astc)A=T.RGBA_ASTC,l=p.cTFASTC_4x4_RGBA;else if(n.bc7)A=T.RGBA_BC7,l=p.cTFBC7_RGBA;else throw new r("No transcoding format target available for ETC1S compressed ktx2.")}else if(166===O.colorModel){if(n.astc)A=T.RGBA_ASTC,l=p.cTFASTC_4x4_RGBA;else if(n.bc7)A=T.RGBA_BC7,l=p.cTFBC7_RGBA;else if(n.s3tc)A=f?T.RGBA_DXT5:T.RGB_DXT1,l=f?p.cTFBC3_RGBA:p.cTFBC1_RGB;else if(n.etc)A=f?T.RGBA8_ETC2_EAC:T.RGB8_ETC2,l=f?p.cTFETC2_RGBA:p.cTFETC1_RGB;else if(n.etc1&&!f)A=T.RGB_ETC1,l=p.cTFETC1_RGB;else if(n.pvrtc)A=f?T.RGBA_PVRTC_4BPPV1:T.RGB_PVRTC_4BPPV1,l=f?p.cTFPVRTC1_4_RGBA:p.cTFPVRTC1_4_RGB;else throw new r("No transcoding format target available for UASTC compressed ktx2.")}if(!a.startTranscoding())throw a.close(),a.delete(),new r("startTranscoding() failed");for(let t=0;t<e.levels.length;++t){let n={};i[t]=n,u=e.pixelWidth>>t,R=e.pixelHeight>>t;let _=new Uint8Array(a.getImageTranscodedSizeInBytes(t,0,0,l.value));if(!s(a.transcodeImage(_,t,0,0,l.value,0,-1,-1)))throw new r("transcodeImage() failed.");o.push(_.buffer),n.positiveX={internalFormat:A,width:u,height:R,levelBuffer:_}}return a.close(),a.delete(),i}(n,i,o,d,e,u):(e.push(n.buffer),function(t,e){let r=t.vkFormat===A.VK_FORMAT_R8G8B8_SRGB?T.RGB:T.RGBA,n;t.vkFormat===A.VK_FORMAT_R8G8B8A8_UNORM?n=c.UNSIGNED_BYTE:t.vkFormat===A.VK_FORMAT_R16G16B16A16_SFLOAT?n=c.HALF_FLOAT:t.vkFormat===A.VK_FORMAT_R32G32B32A32_SFLOAT&&(n=c.FLOAT);for(let _=0;_<t.levels.length;++_){let o={};e[_]=o;let i=t.levels[_].levelData,a=t.pixelWidth>>_,u=t.pixelHeight>>_,R=a*u*T.componentsLength(r);for(let e=0;e<t.faceCount;++e){let _=i.byteOffset+R*t.typeSize*e,f;f=s(n)&&1!==c.sizeInBytes(n)?2===c.sizeInBytes(n)?new Uint16Array(i.buffer,_,R):new Float32Array(i.buffer,_,R):new Uint8Array(i.buffer,_,R),o[B[e]]={internalFormat:r,datatype:n,width:a,height:u,levelBuffer:f}}}}(i,u)),u}(t,e)});export{h as default};